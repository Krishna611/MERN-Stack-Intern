{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gvr_k\\\\Downloads\\\\mern_intern_assignment_full\\\\frontend\\\\src\\\\pages\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from 'react';\nimport API from '../api';\nimport { AuthContext } from '../auth/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const [form, setForm] = useState({\n    email: '',\n    password: ''\n  });\n  const {\n    login\n  } = useContext(AuthContext);\n  const submit = async e => {\n    e.preventDefault();\n\n    // Basic validation\n    if (!form.email || !form.password) {\n      alert('Please enter email and password');\n      return;\n    }\n    try {\n      var _res$data, _res$data$user, _res$data2;\n      const res = await API.post('/auth/login', form);\n\n      // Check if response contains user & role\n      if ((_res$data = res.data) !== null && _res$data !== void 0 && (_res$data$user = _res$data.user) !== null && _res$data$user !== void 0 && _res$data$user.role && (_res$data2 = res.data) !== null && _res$data2 !== void 0 && _res$data2.token) {\n        login(res.data.token, res.data.user.role); // redirects based on role\n      } else {\n        alert('Invalid login response from server');\n      }\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      // Show server error\n      alert(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Login failed');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Email\",\n        value: form.email,\n        onChange: e => setForm({\n          ...form,\n          email: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Password\",\n        type: \"password\",\n        value: form.password,\n        onChange: e => setForm({\n          ...form,\n          password: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"6wKF78zhuR/vwpeGxdULkdwTLtM=\");\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useContext","API","AuthContext","jsxDEV","_jsxDEV","Login","_s","form","setForm","email","password","login","submit","e","preventDefault","alert","_res$data","_res$data$user","_res$data2","res","post","data","user","role","token","err","_err$response","_err$response$data","_err$response2","_err$response2$data","response","message","error","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","value","onChange","target","type","_c","$RefreshReg$"],"sources":["C:/Users/gvr_k/Downloads/mern_intern_assignment_full/frontend/src/pages/Login.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\nimport API from '../api';\nimport { AuthContext } from '../auth/AuthContext';\n\nexport default function Login() {\n  const [form, setForm] = useState({ email: '', password: '' });\n  const { login } = useContext(AuthContext);\n\n  const submit = async (e) => {\n    e.preventDefault();\n\n    // Basic validation\n    if (!form.email || !form.password) {\n      alert('Please enter email and password');\n      return;\n    }\n\n    try {\n      const res = await API.post('/auth/login', form);\n\n      // Check if response contains user & role\n      if (res.data?.user?.role && res.data?.token) {\n        login(res.data.token, res.data.user.role); // redirects based on role\n      } else {\n        alert('Invalid login response from server');\n      }\n    } catch (err) {\n      // Show server error\n      alert(err.response?.data?.message || err.response?.data?.error || 'Login failed');\n    }\n  };\n\n  return (\n    <div>\n      <h2>Login</h2>\n      <form onSubmit={submit}>\n        <input\n          placeholder=\"Email\"\n          value={form.email}\n          onChange={e => setForm({ ...form, email: e.target.value })}\n        />\n        <input\n          placeholder=\"Password\"\n          type=\"password\"\n          value={form.password}\n          onChange={e => setForm({ ...form, password: e.target.value })}\n        />\n        <button type=\"submit\">Login</button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}